(this["webpackJsonpreactjs-base-typescript"]=this["webpackJsonpreactjs-base-typescript"]||[]).push([[15],{355:function(e,i,t){"use strict";t.r(i);var c=t(2),a=t(9),n=t(0),o=t(376),s=t(377),l=t(25),d=t(19),r=t(402),j=t(108),v=t.p+"static/media/image-book.505facc4.svg",u=t.p+"static/media/icon-list.e979c01b.svg",b=t(42),O=t(90),h=t(409),m=t(45),x=t(4),g=t(150),p=t(23),f=t(28),R=t(383),k=(t(430),t(1)),B=function(){var e,i,t,j,v,u=Object(l.g)().id,B=Object(d.b)(),N=Object(d.c)((function(e){var i;return null===(i=e.productReducer.getProductResponse)||void 0===i?void 0:i.data})),y=Object(n.useState)({page:m.a,pageSize:m.b}),C=Object(a.a)(y,2),S=C[0],D=C[1],_=null===N||void 0===N?void 0:N.book,A=Object(d.c)((function(e){var i;return null===(i=e.productReducer.getProductRateResponse)||void 0===i?void 0:i.data})),w=0===(null===A||void 0===A||null===(e=A.records)||void 0===e?void 0:e.length),P=Object(n.useState)(!1),E=Object(a.a)(P,2),V=E[0],T=E[1],z=Object(n.useCallback)((function(){B(x.cb.request({params:S,paths:{id:u}}))}),[B,S,u]);return Object(n.useEffect)((function(){z()}),[z]),Object(k.jsxs)("div",{className:"BookRate",children:[Object(k.jsx)("div",{className:"BookRate-rate",children:Object(k.jsxs)(o.a,{children:[Object(k.jsx)(s.a,{span:24,lg:{span:6},children:Object(k.jsxs)("div",{className:"BookRate-rate-total flex flex-col items-center justify-center",children:[Object(k.jsx)("span",{className:"BookRate-rate-total-label",children:null===(i=(((null===_||void 0===_?void 0:_.avgContentRate)||0)+((null===_||void 0===_?void 0:_.avgVoiceRate)||0))/2)||void 0===i?void 0:i.toFixed(1)}),Object(k.jsx)(r.a,{value:(((null===_||void 0===_?void 0:_.avgContentRate)||0)+((null===_||void 0===_?void 0:_.avgVoiceRate)||0))/2,disabled:!0})]})}),Object(k.jsx)(s.a,{span:24,lg:{span:12},children:Object(k.jsxs)("div",{className:"BookRate-rate-detail",children:[Object(k.jsxs)("div",{className:"BookRate-rate-detail-item",children:[Object(k.jsxs)("div",{className:"BookRate-rate-detail-item-label flex justify-between",children:[Object(k.jsx)("span",{children:"Gi\u1ecdng \u0111\u1ecdc"}),Object(k.jsx)("span",{children:null===_||void 0===_||null===(t=_.avgContentRate)||void 0===t?void 0:t.toFixed(1)})]}),Object(k.jsx)("div",{className:"BookRate-rate-detail-item-progress",children:Object(k.jsx)("div",{className:"BookRate-rate-detail-item-progress-line",style:{width:"".concat(((null===_||void 0===_?void 0:_.avgContentRate)||0)/5*100,"%")}})})]}),Object(k.jsxs)("div",{className:"BookRate-rate-detail-item",children:[Object(k.jsxs)("div",{className:"BookRate-rate-detail-item-label flex justify-between",children:[Object(k.jsx)("span",{children:"N\u1ed9i dung"}),Object(k.jsx)("span",{children:null===_||void 0===_||null===(j=_.avgVoiceRate)||void 0===j?void 0:j.toFixed(1)})]}),Object(k.jsx)("div",{className:"BookRate-rate-detail-item-progress",children:Object(k.jsx)("div",{className:"BookRate-rate-detail-item-progress-line",style:{width:"".concat(((null===_||void 0===_?void 0:_.avgVoiceRate)||0)/5*100,"%")}})})]})]})}),Object(k.jsx)(s.a,{span:24,lg:{span:6},children:Object(k.jsx)("div",{className:"BookRate-rate-btn flex items-center justify-center",children:Object(k.jsx)(b.a,{title:"Vi\u1ebft c\u1ea3m nh\u1eadn",onClick:function(){T(!0)},disabled:!(null!==N&&void 0!==N&&N.is_buy)})})})]})}),w?Object(k.jsx)(g.a,{title:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u \u0111\xe1nh gi\xe1"}):Object(k.jsx)("div",{className:"BookRate-comments",children:null===A||void 0===A||null===(v=A.records)||void 0===v?void 0:v.map((function(e){var i,t;return Object(k.jsxs)("div",{className:"BookRate-comments-item flex items-start",children:[Object(k.jsx)("div",{className:"BookRate-comments-item-avatar",children:Object(k.jsx)(O.a,{image:null===(i=e.user)||void 0===i?void 0:i.avatar})}),Object(k.jsxs)("div",{className:"BookRate-comments-item-info",children:[Object(k.jsxs)("div",{className:"BookRate-comments-item-info-name flex items-center",children:[null===(t=e.user)||void 0===t?void 0:t.name,Object(k.jsx)("div",{className:"BookRate-comments-item-info-date",children:Object(p.b)(e.createdAt,f.a.DATE)}),Object(k.jsx)("div",{className:"BookRate-comments-item-info-rate",children:Object(k.jsx)(r.a,{disabled:!0,value:(e.contentStar+e.voiceStar)/2})})]}),Object(k.jsx)("div",{className:"BookRate-comments-item-info-content",children:e.content})]})]},e._id)}))}),Object(k.jsx)("div",{className:"BookRate-pagination",children:Object(k.jsx)(R.a,{page:S.page,pageSize:S.pageSize,total:null===A||void 0===A?void 0:A.total,onChange:function(e,i){D(Object(c.a)(Object(c.a)({},S),{},{page:e,pageSize:i||S.pageSize}))}})}),Object(k.jsx)(h.a,{visible:V,onClose:function(){T(!1)},onSubmit:z})]})},N=t(154),y=t(408),C=t(406),S=t(11),D=t(17),_=t(37),A=t(410),w=(t(434),function(){var e,i,t,O,h,m=Object(l.g)().id,g=Object(d.b)(),R=_.a.getAccessToken(),w=Object(n.useState)(!1),P=Object(a.a)(w,2),E=P[0],V=P[1],T=Object(n.useState)({visible:!1}),z=Object(a.a)(T,2),L=z[0],U=z[1],q=Object(d.c)((function(e){var i;return null===(i=e.productReducer.getProductResponse)||void 0===i?void 0:i.data})),F=Object(d.c)((function(e){var i;return null===(i=e.profileReducer.getProfileResponse)||void 0===i?void 0:i.data})),J=null===q||void 0===q?void 0:q.book,I=null===q||void 0===q?void 0:q.is_buy,K=null===q||void 0===q?void 0:q.is_save,M=(null===J||void 0===J?void 0:J.voice)&&(null===J||void 0===J||null===(e=J.voice)||void 0===e?void 0:e.length)>0,G=Object(d.c)((function(e){return e.uiReducer.audio})),H=null===G||void 0===G?void 0:G.voice,Q=null===G||void 0===G?void 0:G.isAudioPlay,W=null===G||void 0===G?void 0:G.isAudioLoading,X=Object(d.c)((function(e){return e.loadingReducer[x.s.SAVE_PRODUCT]})),Y=Object(d.c)((function(e){return e.loadingReducer[x.t.UNSAVE_PRODUCT]})),Z=X||Y,$=function(e){R?(e||Object(p.i)(f.d.ERROR,"B\u1ea1n ph\u1ea3i thanh to\xe1n s\xe1ch \u0111\u1ec3 th\u1ef1c hi\u1ec7n h\xe0nh \u0111\u1ed9ng n\xe0y"),V(!0)):(g(x.ob.toggleModalAuth(!0)),Object(p.i)(f.d.ERROR,"B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 th\u1ef1c hi\u1ec7n h\xe0nh \u0111\u1ed9ng n\xe0y"))},ee=function(){V(!1)},ie=function(e){U({visible:!0,payment_type:e})},te=function(){Object(p.i)(f.d.SUCCESS,"".concat(K?"B\u1ecf l\u01b0u":"L\u01b0u"," t\xe2m s\xe1ch th\xe0nh c\xf4ng")),ae()},ce=function(e){(null===H||void 0===H?void 0:H._id)!==e._id&&g(x.ob.setAudio({voice:e})),g(x.ob.setAudio({visible:!0,productState:q,isAudioPlay:!0})),Object(l.e)(S.d.BookReader(null===J||void 0===J?void 0:J.slug,null===J||void 0===J?void 0:J._id))},ae=Object(n.useCallback)((function(){m&&g(x.ab.request({paths:{id:m}}))}),[m,F,g]);return Object(n.useEffect)((function(){ae()}),[ae]),Object(k.jsxs)("div",{className:"BookDetail",children:[Object(k.jsx)("div",{className:"container",children:Object(k.jsx)("div",{className:"BookDetail-wrapper",children:Object(k.jsxs)(o.a,{gutter:[40,24],children:[Object(k.jsx)(s.a,{span:24,lg:{span:12},children:Object(k.jsx)("div",{className:"BookDetail-image",children:Object(k.jsx)(N.a,{arrows:!1,dots:!1,slidesToShow:1,infinite:!0,autoplay:!0,children:null===J||void 0===J||null===(i=J.images)||void 0===i?void 0:i.map((function(e){return Object(k.jsx)("div",{children:Object(k.jsx)("div",{className:"BookDetail-image-item",children:Object(k.jsx)("img",{src:e,alt:""})},e)})}))})})}),Object(k.jsx)(s.a,{span:24,lg:{span:12},children:Object(k.jsxs)("div",{className:"BookDetail-info",children:[Object(k.jsx)("div",{className:"BookDetail-info-title",children:null===J||void 0===J?void 0:J.name}),Object(k.jsxs)(o.a,{justify:"space-between",align:"middle",children:[Object(k.jsx)(s.a,{children:Object(k.jsx)("div",{className:"BookDetail-info-author",children:null===J||void 0===J||null===(t=J.author)||void 0===t?void 0:t.name})}),Object(k.jsx)(s.a,{children:Object(k.jsxs)("div",{className:"BookDetail-info-rate flex items-center",children:[null===(O=(((null===J||void 0===J?void 0:J.avgContentRate)||0)+((null===J||void 0===J?void 0:J.avgVoiceRate)||0))/2)||void 0===O?void 0:O.toFixed(1),Object(k.jsx)(r.a,{value:(((null===J||void 0===J?void 0:J.avgContentRate)||0)+((null===J||void 0===J?void 0:J.avgVoiceRate)||0))/2,disabled:!0})]})})]}),Object(k.jsxs)("div",{className:"BookDetail-info-price flex items-center",children:[Object(k.jsx)("img",{src:j.a,alt:""}),Object(k.jsx)("strong",{children:null===J||void 0===J?void 0:J.price}),"BCoin",(null===J||void 0===J?void 0:J.prePrice)&&(null===J||void 0===J?void 0:J.prePrice)!==J.price&&Object(k.jsxs)("del",{children:[Object(k.jsx)("strong",{children:null===J||void 0===J?void 0:J.prePrice}),"Bcoin"]})]}),Object(k.jsxs)("div",{className:"BookDetail-info-title flex items-center",children:[Object(k.jsx)("img",{src:v,alt:""}),"V\u1ec1 s\xe1ch & t\xe1c gi\u1ea3"]}),Object(k.jsx)("div",{className:"BookDetail-info-content",children:null===J||void 0===J?void 0:J.description}),Object(k.jsx)("div",{className:"BookDetail-info-btn",children:Object(k.jsxs)(o.a,{gutter:[12,12],children:[Object(k.jsx)(s.a,{span:12,children:I?Object(k.jsx)(b.a,{type:"primary",title:"\u0110\u1ecdc s\xe1ch",link:S.d.BookReader(null===J||void 0===J?void 0:J.slug,null===J||void 0===J?void 0:J._id)}):Object(k.jsx)(b.a,{type:"default",title:"Thanh to\xe1n",onClick:function(){return $(!0)}})}),Object(k.jsx)(s.a,{span:12,children:Object(k.jsx)(b.a,{iconName:K?D.b.Unsaved:D.b.Saved,iconColor:K?D.a.BLACK:D.a.WHITE,type:K?"default":"primary",title:K?"B\u1ecf l\u01b0u t\xe2m s\xe1ch":"L\u01b0u t\xe2m s\xe1ch",onClick:function(){R?g(K?x.pb.request({paths:{id:m}},te):x.nb.request({paths:{id:m}},te)):(g(x.ob.toggleModalAuth(!0)),Object(p.i)(f.d.ERROR,"B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 th\u1ef1c hi\u1ec7n h\xe0nh \u0111\u1ed9ng n\xe0y"))},loading:Z})})]})})]})})]})})}),Object(k.jsx)("div",{className:"BookDetail-wrapper-content",children:Object(k.jsx)("div",{className:"container",children:Object(k.jsxs)(o.a,{children:[M&&Object(k.jsx)(s.a,{span:24,children:Object(k.jsxs)("div",{className:"BookDetail-card",children:[Object(k.jsxs)("div",{className:"BookDetail-card-header flex items-center",children:[Object(k.jsx)("img",{src:u,alt:""}),"Danh s\xe1ch ch\u01b0\u01a1ng"]}),Object(k.jsx)("div",{className:"BookDetail-card-body",children:Object(k.jsx)("div",{className:"BookDetail-chapter",children:null===J||void 0===J||null===(h=J.voice)||void 0===h?void 0:h.map((function(e,i){return Object(k.jsx)(y.a,Object(c.a)(Object(c.a)(Object(c.a)({},e),e),{},{isActive:0===i||I,isAudioPlay:Q&&e._id===(null===H||void 0===H?void 0:H._id),isAudioLoading:W&&e._id===(null===H||void 0===H?void 0:H._id),isPlayed:G.visible&&e._id===(null===H||void 0===H?void 0:H._id),onClick:function(){return null===ce||void 0===ce?void 0:ce(e)},onBuyBook:function(){return $()}}),e._id)}))})})]})}),Object(k.jsx)(s.a,{span:24,children:Object(k.jsxs)("div",{className:"BookDetail-card",children:[Object(k.jsxs)("div",{className:"BookDetail-card-header flex items-center",children:[Object(k.jsx)("img",{src:u,alt:""}),"\u0110\xe1nh gi\xe1 & nh\u1eadn x\xe9t"]}),Object(k.jsx)("div",{className:"BookDetail-card-body",children:Object(k.jsx)(B,{})})]})})]})})}),Object(k.jsx)(C.a,{visible:E,onClose:ee,onSubmit:function(e){ee(),ie(e.payment_type)}}),Object(k.jsx)(A.a,Object(c.a)(Object(c.a)({},L),{},{onClose:function(){U({visible:!1})},onSubmit:function(){ae(),ee()}}))]})});i.default=w},383:function(e,i,t){"use strict";t(0);var c=t(469),a=t(10),n=t.n(a),o=(t(384),t(17)),s=t(23),l=t(1),d=function(e){var i=e.page,t=e.pageSize,a=e.total,d=void 0===a?0:a,r=e.className,j=e.onChange;return Object(l.jsx)("div",{className:n()("Pagination",r),children:Object(l.jsx)(c.a,{current:i,pageSize:t,total:d,hideOnSinglePage:!0,showLessItems:!0,showTotal:function(){return"Trang ".concat(i," / ").concat(Object(s.d)(d,t))},showQuickJumper:!1,showSizeChanger:!1,itemRender:function(e,i,t){switch(i){case"prev":return Object(l.jsx)(o.c,{name:o.b.AngleLeft});case"next":return Object(l.jsx)(o.c,{name:o.b.AngleRight});default:return t}},onChange:j})})};i.a=d},384:function(e,i,t){},430:function(e,i,t){},434:function(e,i,t){}}]);
//# sourceMappingURL=15.b3608e34.chunk.js.map