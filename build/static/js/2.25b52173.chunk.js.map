{"version":3,"sources":["components/TextArea/TextArea.tsx","components/TextArea/index.ts","components/Rate/Rate.tsx","components/Rate/index.ts","components/Radio/index.ts","components/Radio/Radio.tsx","pages/BookDetail/ModalBuyBook/ModalBuyBook.tsx","pages/BookDetail/ModalBuyBook/index.ts","components/Slider/Slider.tsx","components/Slider/index.ts","components/ChapterCard/ChapterCard.tsx","components/ChapterCard/index.ts","containers/BookRate/BookRateForm/BookRateForm.tsx","containers/BookRate/BookRateForm/index.ts","pages/BookDetail/ModalConfirmBuyBook/ModalConfirmBuyBook.tsx","pages/BookDetail/ModalConfirmBuyBook/index.ts"],"names":["AntdTextArea","Input","TextArea","className","size","placeholder","label","onChange","value","classNames","Rate","disabled","allowHalf","allowClear","Radio","options","Group","e","currentValue","target","option","find","item","direction","map","ModalBuyBook","visible","onClose","onSubmit","Form","useForm","form","productState","useSelector","state","productReducer","getProductResponse","data","profileState","profileReducer","getProfileResponse","membershipState","membershipReducer","getMyMembershipResponse","bookData","book","dataPaymentTypeOptions","style","fontSize","marginLeft","color","EIconColor","SCORPION","bcoin","ETransactionType","BUY_USE_WALLET","book_for_free","BUY_USE_CARD","useEffect","setFieldsValue","payment_type","Modal","width","title","name","price","layout","onFinish","values","body","Item","Button","htmlType","Slider","defaultValue","bordered","step","min","max","showValue","marks","tooltipVisible","ChapterCard","src","isActive","isAudioPlay","isAudioLoading","isPlayed","onBuyBook","onClick","audioRef","useRef","useState","loading","setLoading","isPlaying","setIsPlaying","source","setSource","isNotPlayAudioFile","current","audio","play","pause","Boolean","played","env","api","baseUrl","service","ref","onLoadedData","Loading","Icon","EIconName","Pause","Play","Locker","showIconChapter","BookRateForm","dispatch","useDispatch","id","useParams","rateProductLoading","loadingReducer","ERateProductAction","RATE_PRODUCT","handleRateProductSuccess","showNotification","ETypeNotification","SUCCESS","voiceStar","contentStar","content","rateProductAction","request","paths","rules","validationRules","required","ModalConfirmBuyBook","isUseWallet","buyProductLoading","EBuyProductAction","BUY_PRODUCT","handleBuyBookSuccess","getProfile","getMyMembership","useCallback","getMyMembershipAction","getProfileAction","ModalConfirm","buyProductAction","text"],"mappings":"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","file":"static/js/2.25b52173.chunk.js","sourcesContent":["import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Input } from 'antd';\r\n\r\nimport { TTextAreaProps } from '@/components/TextArea/TextArea.types';\r\n\r\nimport './TextArea.scss';\r\n\r\nconst { TextArea: AntdTextArea } = Input;\r\n\r\nconst TextArea: React.FC<TTextAreaProps> = ({ className, size, placeholder, label, onChange, value }) => {\r\n  return (\r\n    <div className={classNames('TextArea', className)}>\r\n      {label && <div className=\"TextArea-label\">{label}</div>}\r\n      <AntdTextArea size={size} placeholder={placeholder} value={value} onChange={onChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextArea;\r\n","import TextArea from './TextArea';\r\n\r\nexport * from './TextArea.types';\r\nexport default TextArea;\r\n","import React from 'react';\r\nimport { Rate as AntdRate } from 'antd';\r\n\r\nimport { TRateProps } from './Rate.types.d';\r\nimport './Rate.scss';\r\n\r\nconst Rate: React.FC<TRateProps> = ({ value, disabled }) => {\r\n  return (\r\n    <div className=\"Rate\">\r\n      <AntdRate value={value} allowHalf allowClear disabled={disabled} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Rate;\r\n","import Rate from './Rate';\r\n\r\nexport * from './Rate.types.d';\r\nexport default Rate;\r\n","import Radio from './Radio';\r\n\r\nexport * from './Radio.types';\r\nexport default Radio;\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Radio as AntdRadio, RadioChangeEvent, Space } from 'antd';\r\n\r\nimport { TRadioProps } from '@/components/Radio/Radio.types';\r\n\r\nimport './Radio.scss';\r\n\r\nconst Radio: React.FC<TRadioProps> = ({ className, options = [], onChange, value }) => {\r\n  const handleRadioChange = (e: RadioChangeEvent): void => {\r\n    const { value: currentValue } = e.target;\r\n    const option = options.find((item) => item.value === currentValue);\r\n    if (option) onChange?.(option);\r\n  };\r\n\r\n  return (\r\n    <div className={classNames('Radio', className)}>\r\n      <AntdRadio.Group onChange={handleRadioChange} value={options.find((item) => item.value === value?.value)?.value}>\r\n        <Space direction=\"vertical\">\r\n          {options.map((item) => (\r\n            <AntdRadio key={item.value} value={item.value} disabled={item.disabled}>\r\n              {item.label}\r\n            </AntdRadio>\r\n          ))}\r\n        </Space>\r\n      </AntdRadio.Group>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Radio;\r\n","import React, { useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Form } from 'antd';\r\n\r\nimport { TRootState } from '@/redux/reducers';\r\nimport { ETransactionType } from '@/services/api';\r\nimport Modal from '@/components/Modal';\r\nimport Radio from '@/components/Radio';\r\nimport Button from '@/components/Button';\r\nimport { EIconColor } from '@/components/Icon';\r\n\r\nimport { TModalBuyBookProps } from './ModalBuyBook.types';\r\nimport './ModalBuyBook.scss';\r\n\r\nconst ModalBuyBook: React.FC<TModalBuyBookProps> = ({ visible, onClose, onSubmit }) => {\r\n  const [form] = Form.useForm();\r\n\r\n  const productState = useSelector((state: TRootState) => state.productReducer.getProductResponse?.data);\r\n  const profileState = useSelector((state: TRootState) => state.profileReducer.getProfileResponse)?.data;\r\n  const membershipState = useSelector((state: TRootState) => state.membershipReducer.getMyMembershipResponse?.data);\r\n  const bookData = productState?.book;\r\n\r\n  const dataPaymentTypeOptions = [\r\n    {\r\n      label: (\r\n        <>\r\n          Ví của tôi\r\n          <span style={{ fontSize: '1.6rem', marginLeft: '0.4rem', color: EIconColor.SCORPION }}>\r\n            ({profileState?.bcoin} Bcoin)\r\n          </span>\r\n        </>\r\n      ),\r\n      value: ETransactionType.BUY_USE_WALLET,\r\n    },\r\n    {\r\n      label: (\r\n        <>\r\n          Thẻ hội viên\r\n          <span style={{ fontSize: '1.6rem', marginLeft: '0.4rem', color: EIconColor.SCORPION }}>\r\n            (còn {membershipState?.book_for_free} cuốn)\r\n          </span>\r\n        </>\r\n      ),\r\n      value: ETransactionType.BUY_USE_CARD,\r\n      disabled: (membershipState?.book_for_free || 0) === 0,\r\n    },\r\n  ];\r\n\r\n  const handleBuyBook = (values: any): void => {\r\n    const body = {\r\n      payment_type: values?.payment_type?.value,\r\n    };\r\n    onSubmit?.(body);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (visible) {\r\n      form.setFieldsValue({\r\n        payment_type: dataPaymentTypeOptions[0],\r\n      });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [visible, form]);\r\n\r\n  return (\r\n    <Modal width={765} className=\"ModalBuyBook\" visible={visible} onClose={onClose} title=\"Thanh toán sách\">\r\n      <div className=\"ModalBuyBook-wrapper\">\r\n        <div className=\"ModalBuyBook-text\">\r\n          {bookData?.name}\r\n          <strong>\r\n            {bookData?.price} <small>Bcoin</small>\r\n          </strong>\r\n        </div>\r\n        <Form form={form} layout=\"vertical\" onFinish={handleBuyBook}>\r\n          <Form.Item label=\"Thanh toán bằng\" name=\"payment_type\">\r\n            <Radio options={dataPaymentTypeOptions} />\r\n          </Form.Item>\r\n\r\n          <div className=\"ModalBuyBook-submit\">\r\n            <Button title=\"Thanh toán\" htmlType=\"submit\" />\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ModalBuyBook;\r\n","import ModalBuyBook from './ModalBuyBook';\r\n\r\nexport default ModalBuyBook;\r\n","import React from 'react';\r\nimport { Slider as AntdSlider } from 'antd';\r\nimport classNames from 'classnames';\r\n\r\nimport { TSliderProps } from './Slider.types.d';\r\nimport './Slider.scss';\r\n\r\nconst Slider: React.FC<TSliderProps> = ({\r\n  label,\r\n  defaultValue,\r\n  value,\r\n  onChange,\r\n  bordered,\r\n  step,\r\n  min,\r\n  max,\r\n  showValue,\r\n  marks,\r\n}) => {\r\n  return (\r\n    <div className={classNames('Slider', { bordered })}>\r\n      {label && <div className=\"Slider-label\">{label}</div>}\r\n      {showValue && <div className=\"Slider-value\">{value}</div>}\r\n      <AntdSlider\r\n        defaultValue={defaultValue}\r\n        value={value}\r\n        onChange={onChange}\r\n        step={step}\r\n        min={min}\r\n        max={max}\r\n        tooltipVisible={false}\r\n        marks={marks}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Slider;\r\n","import Slider from './Slider';\r\n\r\nexport * from './Slider.types.d';\r\nexport default Slider;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport Icon, { EIconName } from '@/components/Icon';\r\nimport Loading from '@/components/Loading';\r\nimport env from '@/env';\r\n\r\nimport { TChapterCardProps } from './ChapterCard.types.d';\r\nimport './ChapterCard.scss';\r\n\r\nconst ChapterCard: React.FC<TChapterCardProps> = ({\r\n  src,\r\n  name,\r\n  isActive,\r\n  isAudioPlay,\r\n  isAudioLoading,\r\n  isPlayed,\r\n  onBuyBook,\r\n  onClick,\r\n}) => {\r\n  const audioRef = useRef<HTMLAudioElement>(null);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [source, setSource] = useState('');\r\n\r\n  const isNotPlayAudioFile = typeof isPlayed !== 'undefined';\r\n\r\n  const showIconChapter = (): EIconName => {\r\n    switch (true) {\r\n      case isAudioPlay:\r\n      case isActive && isPlaying:\r\n        return EIconName.Pause;\r\n      case isActive && !isPlaying:\r\n        return EIconName.Play;\r\n      default:\r\n        return EIconName.Locker;\r\n    }\r\n  };\r\n\r\n  const handleClick = (): void => {\r\n    if (!loading) {\r\n      if (isActive) {\r\n        if (!isNotPlayAudioFile) {\r\n          if (isPlaying) {\r\n            setIsPlaying(false);\r\n          } else if (!source) {\r\n            setLoading(true);\r\n            setSource(`${env.api.baseUrl.service}/upload/get-voice/${src}`);\r\n          } else {\r\n            setIsPlaying(true);\r\n          }\r\n        } else {\r\n          onClick?.();\r\n        }\r\n      } else {\r\n        onBuyBook?.();\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLoadSourceSuccess = (): void => {\r\n    setLoading(false);\r\n    if (!isNotPlayAudioFile) {\r\n      setIsPlaying(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (audioRef?.current) {\r\n      const audio = audioRef?.current;\r\n      if (isPlaying) audio.play();\r\n      else audio.pause();\r\n    }\r\n  }, [isPlaying]);\r\n\r\n  useEffect(() => {\r\n    setLoading(Boolean(isAudioLoading));\r\n  }, [isAudioLoading]);\r\n\r\n  return (\r\n    <div\r\n      className={classNames('ChapterCard flex items-center justify-between', { played: isPlayed })}\r\n      onClick={handleClick}\r\n    >\r\n      {/* eslint-disable-next-line jsx-a11y/media-has-caption */}\r\n      {source && <audio ref={audioRef} src={source} onLoadedData={handleLoadSourceSuccess} />}\r\n\r\n      <div className=\"ChapterCard-title\">{name}</div>\r\n      <div className=\"ChapterCard-icon\">{loading ? <Loading /> : <Icon name={showIconChapter()} />}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChapterCard;\r\n","import ChapterCard from './ChapterCard';\r\n\r\nexport * from './ChapterCard.types.d';\r\nexport default ChapterCard;\r\n","import React, { useEffect } from 'react';\r\nimport { Form } from 'antd';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams } from '@reach/router';\r\n\r\nimport Modal from '@/components/Modal';\r\nimport TextArea from '@/components/TextArea';\r\nimport Button from '@/components/Button';\r\nimport Slider from '@/components/Slider';\r\nimport { showNotification, validationRules } from '@/utils/functions';\r\nimport { ERateProductAction, rateProductAction } from '@/redux/actions';\r\nimport { ETypeNotification } from '@/common/enums';\r\nimport { TRootState } from '@/redux/reducers';\r\n\r\nimport { TBookRateFormProps } from './BookRateForm.types';\r\nimport './BookRateForm.scss';\r\n\r\nconst BookRateForm: React.FC<TBookRateFormProps> = ({ visible, onClose, onSubmit }) => {\r\n  const [form] = Form.useForm();\r\n  const dispatch = useDispatch();\r\n  const { id } = useParams();\r\n\r\n  const rateProductLoading = useSelector((state: TRootState) => state.loadingReducer[ERateProductAction.RATE_PRODUCT]);\r\n\r\n  const handleSubmit = (values: any): void => {\r\n    const body = values;\r\n    dispatch(rateProductAction.request({ body, paths: { id } }, handleRateProductSuccess));\r\n  };\r\n\r\n  const handleRateProductSuccess = (): void => {\r\n    showNotification(ETypeNotification.SUCCESS, 'Đánh giá tâm sách thành công');\r\n    onClose?.();\r\n    onSubmit?.();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (visible) {\r\n      form.setFieldsValue({\r\n        voiceStar: 1,\r\n        contentStar: 1,\r\n        content: '',\r\n      });\r\n    }\r\n  }, [form, visible]);\r\n\r\n  return (\r\n    <Modal width={776} className=\"BookRateForm\" visible={visible} title=\"Viết đánh giá\" onClose={onClose}>\r\n      <div className=\"BookRateForm-wrapper\">\r\n        <Form form={form} layout=\"vertical\" onFinish={handleSubmit}>\r\n          <Form.Item name=\"voiceStar\">\r\n            <Slider label=\"Giọng đọc\" min={1} max={5} step={0.5} showValue />\r\n          </Form.Item>\r\n          <Form.Item name=\"contentStar\">\r\n            <Slider label=\"Nội dung\" min={1} max={5} step={0.5} showValue />\r\n          </Form.Item>\r\n          <Form.Item name=\"content\" rules={[validationRules.required()]}>\r\n            <TextArea label=\"Đánh giá của bạn\" placeholder=\"Nhập nội dung\" />\r\n          </Form.Item>\r\n\r\n          <div className=\"BookRateForm-submit\">\r\n            <Button title=\"Gửi đánh giá\" htmlType=\"submit\" loading={rateProductLoading} />\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default BookRateForm;\r\n","import BookRateForm from './BookRateForm';\r\n\r\nexport * from './BookRateForm.types.d';\r\nexport default BookRateForm;\r\n","import React, { useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams } from '@reach/router';\r\n\r\nimport { TRootState } from '@/redux/reducers';\r\nimport { buyProductAction, EBuyProductAction, getMyMembershipAction, getProfileAction } from '@/redux/actions';\r\nimport { showNotification } from '@/utils/functions';\r\nimport { ETypeNotification } from '@/common/enums';\r\nimport ModalConfirm from '@/containers/ModalConfirm';\r\nimport { ETransactionType } from '@/services/api';\r\n\r\nimport { TModalConfirmBuyBookProps } from './ModalConfirmBuyBook.types';\r\n\r\nconst ModalConfirmBuyBook: React.FC<TModalConfirmBuyBookProps> = ({ visible, payment_type, onClose, onSubmit }) => {\r\n  const dispatch = useDispatch();\r\n  const { id } = useParams();\r\n  const isUseWallet = payment_type === ETransactionType.BUY_USE_WALLET;\r\n\r\n  const productState = useSelector((state: TRootState) => state.productReducer.getProductResponse?.data);\r\n  const buyProductLoading = useSelector((state: TRootState) => state.loadingReducer[EBuyProductAction.BUY_PRODUCT]);\r\n  const bookData = productState?.book;\r\n\r\n  const handleBuyBook = (): void => {\r\n    const body = {\r\n      payment_type,\r\n    };\r\n    dispatch(buyProductAction.request({ paths: { id }, body }, handleBuyBookSuccess));\r\n  };\r\n\r\n  const handleBuyBookSuccess = (): void => {\r\n    showNotification(ETypeNotification.SUCCESS, 'Mua tâm sách thành công');\r\n    getProfile();\r\n    getMyMembership();\r\n    onClose?.();\r\n    onSubmit?.();\r\n  };\r\n\r\n  const getMyMembership = useCallback(() => {\r\n    dispatch(getMyMembershipAction.request({}));\r\n  }, [dispatch]);\r\n\r\n  const getProfile = useCallback(() => {\r\n    dispatch(getProfileAction.request({}));\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <ModalConfirm\r\n      visible={visible}\r\n      onClose={onClose}\r\n      onSubmit={handleBuyBook}\r\n      loading={buyProductLoading}\r\n      title=\"Xác nhận thanh toán\"\r\n      text={\r\n        isUseWallet ? (\r\n          <>\r\n            <strong>{bookData?.name} </strong>\r\n            <span>\r\n              <strong>\r\n                <big>{bookData?.price}</big>\r\n              </strong>\r\n              <small>Bcoin</small>\r\n            </span>\r\n          </>\r\n        ) : (\r\n          <>\r\n            Đổi {` `}\r\n            <strong>{bookData?.name}</strong>\r\n            bằng một lượt sử dụng {` `}\r\n            <span>\r\n              <strong>\r\n                <big>Thẻ Hội Viên</big>\r\n              </strong>\r\n            </span>\r\n          </>\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default ModalConfirmBuyBook;\r\n","import ModalConfirmBuyBook from './ModalConfirmBuyBook';\r\n\r\nexport default ModalConfirmBuyBook;\r\n"],"sourceRoot":""}