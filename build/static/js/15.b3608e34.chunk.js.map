{"version":3,"sources":["assets/images/image-book.svg","assets/icons/icon-list.svg","containers/BookRate/index.ts","containers/BookRate/BookRate.tsx","pages/BookDetail/BookDetail.tsx","pages/BookDetail/index.ts","components/Pagination/Pagination.tsx","components/Pagination/index.ts"],"names":["BookRate","id","useParams","dispatch","useDispatch","productState","useSelector","state","productReducer","getProductResponse","data","useState","page","DEFAULT_PAGE","pageSize","DEFAULT_PAGE_SIZE","getProductRateParamsRequest","setGetProductRateParamsRequest","bookData","book","productRateState","getProductRateResponse","isEmpty","records","length","visibleBookRateFormModal","setVisibleBookRateFormModal","getProductRate","useCallback","getProductRateAction","request","params","paths","useEffect","className","span","lg","avgContentRate","avgVoiceRate","toFixed","Rate","value","disabled","style","width","Button","title","onClick","is_buy","Empty","map","item","Avatar","image","user","avatar","name","formatISODateToDateTime","createdAt","EFormat","DATE","contentStar","voiceStar","content","_id","Pagination","total","onChange","BookRateForm","visible","onClose","onSubmit","BookDetail","atk","Helper","getAccessToken","visibleModalBuyBook","setVisibleModalBuyBook","modalConfirmBuyBook","setModalConfirmBuyBook","profileState","profileReducer","getProfileResponse","isBoughtBook","isSavedBook","is_save","isShowChapter","voice","audioState","uiReducer","audio","isAudioPlay","isAudioLoading","saveProductLoading","loadingReducer","ESaveProductAction","SAVE_PRODUCT","unsaveProductLoading","EUnsaveProductAction","UNSAVE_PRODUCT","savedProductLoading","handleOpenBuyBookModal","forward","showNotification","ETypeNotification","ERROR","uiActions","toggleModalAuth","handleCloseBuyBookModal","handleOpenModalConfirmBuyBook","payment_type","handleSavedBookSuccess","SUCCESS","getProduct","handleClickChapter","setAudio","navigate","Paths","BookReader","slug","getProductAction","gutter","Carousels","arrows","dots","slidesToShow","infinite","autoplay","images","src","alt","justify","align","author","ImageCoin","price","prePrice","ImageBook","description","type","link","iconName","EIconName","Unsaved","Saved","iconColor","EIconColor","BLACK","WHITE","unsaveProductAction","saveProductAction","loading","IconList","index","ChapterCard","isActive","isPlayed","onBuyBook","ModalBuyBook","values","ModalConfirmBuyBook","classNames","current","hideOnSinglePage","showLessItems","showTotal","getTotalPage","showQuickJumper","showSizeChanger","itemRender","_","element","Icon","AngleLeft","AngleRight"],"mappings":"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","file":"static/js/15.b3608e34.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/image-book.505facc4.svg\";","export default __webpack_public_path__ + \"static/media/icon-list.e979c01b.svg\";","import BookRate from './BookRate';\r\n\r\nexport * from './BookRate.types.d';\r\nexport default BookRate;\r\n","/* eslint-disable no-underscore-dangle */\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { Row, Col } from 'antd';\r\nimport { useParams } from '@reach/router';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Rate from '@/components/Rate';\r\nimport Button from '@/components/Button';\r\nimport Avatar from '@/components/Avatar';\r\nimport BookRateForm from '@/containers/BookRate/BookRateForm';\r\nimport { TGetProductRateParams } from '@/services/api';\r\nimport { DEFAULT_PAGE, DEFAULT_PAGE_SIZE } from '@/common/constants';\r\nimport { getProductRateAction } from '@/redux/actions';\r\nimport { TRootState } from '@/redux/reducers';\r\nimport Empty from '@/components/Empty';\r\nimport { formatISODateToDateTime } from '@/utils/functions';\r\nimport { EFormat } from '@/common/enums';\r\nimport Pagination from '@/components/Pagination';\r\n\r\nimport { TBookRateProps } from './BookRate.types.d';\r\nimport './BookRate.scss';\r\n\r\nconst BookRate: React.FC<TBookRateProps> = () => {\r\n  const { id } = useParams();\r\n  const dispatch = useDispatch();\r\n\r\n  const productState = useSelector((state: TRootState) => state.productReducer.getProductResponse?.data);\r\n  const [getProductRateParamsRequest, setGetProductRateParamsRequest] = useState<TGetProductRateParams>({\r\n    page: DEFAULT_PAGE,\r\n    pageSize: DEFAULT_PAGE_SIZE,\r\n  });\r\n\r\n  const bookData = productState?.book;\r\n\r\n  const productRateState = useSelector((state: TRootState) => state.productReducer.getProductRateResponse?.data);\r\n  const isEmpty = productRateState?.records?.length === 0;\r\n\r\n  const [visibleBookRateFormModal, setVisibleBookRateFormModal] = useState<boolean>(false);\r\n\r\n  const handleOpenBookRateFormModal = (): void => {\r\n    setVisibleBookRateFormModal(true);\r\n  };\r\n\r\n  const handleCloseBookRateFormModal = (): void => {\r\n    setVisibleBookRateFormModal(false);\r\n  };\r\n\r\n  const handlePageChange = (page: number, pageSize?: number): void => {\r\n    setGetProductRateParamsRequest({\r\n      ...getProductRateParamsRequest,\r\n      page,\r\n      pageSize: pageSize || getProductRateParamsRequest.pageSize,\r\n    });\r\n  };\r\n\r\n  const getProductRate = useCallback(() => {\r\n    dispatch(getProductRateAction.request({ params: getProductRateParamsRequest, paths: { id } }));\r\n  }, [dispatch, getProductRateParamsRequest, id]);\r\n\r\n  useEffect(() => {\r\n    getProductRate();\r\n  }, [getProductRate]);\r\n\r\n  return (\r\n    <div className=\"BookRate\">\r\n      <div className=\"BookRate-rate\">\r\n        <Row>\r\n          <Col span={24} lg={{ span: 6 }}>\r\n            <div className=\"BookRate-rate-total flex flex-col items-center justify-center\">\r\n              <span className=\"BookRate-rate-total-label\">\r\n                {(((bookData?.avgContentRate || 0) + (bookData?.avgVoiceRate || 0)) / 2)?.toFixed(1)}\r\n              </span>\r\n              <Rate value={((bookData?.avgContentRate || 0) + (bookData?.avgVoiceRate || 0)) / 2} disabled />\r\n            </div>\r\n          </Col>\r\n          <Col span={24} lg={{ span: 12 }}>\r\n            <div className=\"BookRate-rate-detail\">\r\n              <div className=\"BookRate-rate-detail-item\">\r\n                <div className=\"BookRate-rate-detail-item-label flex justify-between\">\r\n                  <span>Giọng đọc</span>\r\n                  <span>{bookData?.avgContentRate?.toFixed(1)}</span>\r\n                </div>\r\n                <div className=\"BookRate-rate-detail-item-progress\">\r\n                  <div\r\n                    className=\"BookRate-rate-detail-item-progress-line\"\r\n                    style={{ width: `${((bookData?.avgContentRate || 0) / 5) * 100}%` }}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"BookRate-rate-detail-item\">\r\n                <div className=\"BookRate-rate-detail-item-label flex justify-between\">\r\n                  <span>Nội dung</span>\r\n                  <span>{bookData?.avgVoiceRate?.toFixed(1)}</span>\r\n                </div>\r\n                <div className=\"BookRate-rate-detail-item-progress\">\r\n                  <div\r\n                    className=\"BookRate-rate-detail-item-progress-line\"\r\n                    style={{ width: `${((bookData?.avgVoiceRate || 0) / 5) * 100}%` }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Col>\r\n          <Col span={24} lg={{ span: 6 }}>\r\n            <div className=\"BookRate-rate-btn flex items-center justify-center\">\r\n              <Button title=\"Viết cảm nhận\" onClick={handleOpenBookRateFormModal} disabled={!productState?.is_buy} />\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n      {isEmpty ? (\r\n        <Empty title=\"Không có dữ liệu đánh giá\" />\r\n      ) : (\r\n        <div className=\"BookRate-comments\">\r\n          {productRateState?.records?.map((item) => (\r\n            <div key={item._id} className=\"BookRate-comments-item flex items-start\">\r\n              <div className=\"BookRate-comments-item-avatar\">\r\n                <Avatar image={item.user?.avatar} />\r\n              </div>\r\n              <div className=\"BookRate-comments-item-info\">\r\n                <div className=\"BookRate-comments-item-info-name flex items-center\">\r\n                  {item.user?.name}\r\n                  <div className=\"BookRate-comments-item-info-date\">\r\n                    {formatISODateToDateTime(item.createdAt, EFormat.DATE)}\r\n                  </div>\r\n                  <div className=\"BookRate-comments-item-info-rate\">\r\n                    <Rate disabled value={(item.contentStar + item.voiceStar) / 2} />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"BookRate-comments-item-info-content\">{item.content}</div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"BookRate-pagination\">\r\n        <Pagination\r\n          page={getProductRateParamsRequest.page}\r\n          pageSize={getProductRateParamsRequest.pageSize}\r\n          total={productRateState?.total}\r\n          onChange={handlePageChange}\r\n        />\r\n      </div>\r\n\r\n      <BookRateForm\r\n        visible={visibleBookRateFormModal}\r\n        onClose={handleCloseBookRateFormModal}\r\n        onSubmit={getProductRate}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookRate;\r\n","/* eslint-disable no-underscore-dangle */\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { Col, Row } from 'antd';\r\nimport { navigate, useParams } from '@reach/router';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Rate from '@/components/Rate';\r\nimport ImageCoin from '@/assets/images/image-coin.svg';\r\nimport ImageBook from '@/assets/images/image-book.svg';\r\nimport IconList from '@/assets/icons/icon-list.svg';\r\nimport Button from '@/components/Button';\r\nimport BookRate from '@/containers/BookRate';\r\nimport {\r\n  ESaveProductAction,\r\n  EUnsaveProductAction,\r\n  getProductAction,\r\n  saveProductAction,\r\n  uiActions,\r\n  unsaveProductAction,\r\n} from '@/redux/actions';\r\nimport { TRootState } from '@/redux/reducers';\r\nimport Carousels from '@/components/Carousels';\r\nimport ChapterCard from '@/components/ChapterCard';\r\nimport ModalBuyBook from '@/pages/BookDetail/ModalBuyBook';\r\nimport { Paths } from '@/pages/routers';\r\nimport { showNotification } from '@/utils/functions';\r\nimport { ETypeNotification } from '@/common/enums';\r\nimport { EIconColor, EIconName } from '@/components/Icon';\r\nimport Helper from '@/services/helpers';\r\nimport { TProductVoice } from '@/common/models';\r\nimport ModalConfirmBuyBook from '@/pages/BookDetail/ModalConfirmBuyBook';\r\nimport { ETransactionType } from '@/services/api';\r\n\r\nimport './BookDetail.scss';\r\n\r\nconst BookDetail: React.FC = () => {\r\n  const { id } = useParams();\r\n  const dispatch = useDispatch();\r\n  const atk = Helper.getAccessToken();\r\n\r\n  const [visibleModalBuyBook, setVisibleModalBuyBook] = useState<boolean>(false);\r\n  const [modalConfirmBuyBook, setModalConfirmBuyBook] = useState<{\r\n    visible: boolean;\r\n    payment_type?: ETransactionType;\r\n  }>({\r\n    visible: false,\r\n  });\r\n\r\n  const productState = useSelector((state: TRootState) => state.productReducer.getProductResponse?.data);\r\n  const profileState = useSelector((state: TRootState) => state.profileReducer.getProfileResponse?.data);\r\n  const bookData = productState?.book;\r\n  const isBoughtBook = productState?.is_buy;\r\n  const isSavedBook = productState?.is_save;\r\n  const isShowChapter = bookData?.voice && bookData?.voice?.length > 0;\r\n\r\n  const audioState = useSelector((state: TRootState) => state.uiReducer.audio);\r\n  const voice = audioState?.voice;\r\n  const isAudioPlay = audioState?.isAudioPlay;\r\n  const isAudioLoading = audioState?.isAudioLoading;\r\n\r\n  const saveProductLoading = useSelector((state: TRootState) => state.loadingReducer[ESaveProductAction.SAVE_PRODUCT]);\r\n  const unsaveProductLoading = useSelector(\r\n    (state: TRootState) => state.loadingReducer[EUnsaveProductAction.UNSAVE_PRODUCT],\r\n  );\r\n  const savedProductLoading = saveProductLoading || unsaveProductLoading;\r\n\r\n  const handleOpenBuyBookModal = (forward?: boolean): void => {\r\n    if (atk) {\r\n      if (!forward) showNotification(ETypeNotification.ERROR, 'Bạn phải thanh toán sách để thực hiện hành động này');\r\n      setVisibleModalBuyBook(true);\r\n    } else {\r\n      dispatch(uiActions.toggleModalAuth(true));\r\n      showNotification(ETypeNotification.ERROR, 'Bạn phải đăng nhập để thực hiện hành động này');\r\n    }\r\n  };\r\n\r\n  const handleCloseBuyBookModal = (): void => {\r\n    setVisibleModalBuyBook(false);\r\n  };\r\n\r\n  const handleSubmitBuyBookModal = (values: { payment_type: ETransactionType }): void => {\r\n    handleCloseBuyBookModal();\r\n    handleOpenModalConfirmBuyBook(values.payment_type);\r\n  };\r\n\r\n  const handleOpenModalConfirmBuyBook = (payment_type: ETransactionType): void => {\r\n    setModalConfirmBuyBook({\r\n      visible: true,\r\n      payment_type,\r\n    });\r\n  };\r\n\r\n  const handleCloseModalConfirmBuyBook = (): void => {\r\n    setModalConfirmBuyBook({\r\n      visible: false,\r\n    });\r\n  };\r\n\r\n  const handleSavedBook = (): void => {\r\n    if (atk) {\r\n      if (isSavedBook) {\r\n        dispatch(unsaveProductAction.request({ paths: { id } }, handleSavedBookSuccess));\r\n      } else {\r\n        dispatch(saveProductAction.request({ paths: { id } }, handleSavedBookSuccess));\r\n      }\r\n    } else {\r\n      dispatch(uiActions.toggleModalAuth(true));\r\n      showNotification(ETypeNotification.ERROR, 'Bạn phải đăng nhập để thực hiện hành động này');\r\n    }\r\n  };\r\n\r\n  const handleSavedBookSuccess = (): void => {\r\n    showNotification(ETypeNotification.SUCCESS, `${isSavedBook ? 'Bỏ lưu' : 'Lưu'} tâm sách thành công`);\r\n    getProduct();\r\n  };\r\n\r\n  const handleClickChapter = (data: TProductVoice): void => {\r\n    if (voice?._id !== data._id) {\r\n      dispatch(uiActions.setAudio({ voice: data }));\r\n    }\r\n    dispatch(uiActions.setAudio({ visible: true, productState, isAudioPlay: true }));\r\n    navigate(Paths.BookReader(bookData?.slug, bookData?._id));\r\n  };\r\n\r\n  const getProduct = useCallback(() => {\r\n    if (id) dispatch(getProductAction.request({ paths: { id } }));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [id, profileState, dispatch]);\r\n\r\n  useEffect(() => {\r\n    getProduct();\r\n  }, [getProduct]);\r\n\r\n  return (\r\n    <div className=\"BookDetail\">\r\n      <div className=\"container\">\r\n        <div className=\"BookDetail-wrapper\">\r\n          <Row gutter={[40, 24]}>\r\n            <Col span={24} lg={{ span: 12 }}>\r\n              <div className=\"BookDetail-image\">\r\n                <Carousels arrows={false} dots={false} slidesToShow={1} infinite autoplay>\r\n                  {bookData?.images?.map((item) => (\r\n                    <div>\r\n                      <div key={item} className=\"BookDetail-image-item\">\r\n                        <img src={item} alt=\"\" />\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </Carousels>\r\n              </div>\r\n            </Col>\r\n            <Col span={24} lg={{ span: 12 }}>\r\n              <div className=\"BookDetail-info\">\r\n                <div className=\"BookDetail-info-title\">{bookData?.name}</div>\r\n                <Row justify=\"space-between\" align=\"middle\">\r\n                  <Col>\r\n                    <div className=\"BookDetail-info-author\">{bookData?.author?.name}</div>\r\n                  </Col>\r\n\r\n                  <Col>\r\n                    <div className=\"BookDetail-info-rate flex items-center\">\r\n                      {(((bookData?.avgContentRate || 0) + (bookData?.avgVoiceRate || 0)) / 2)?.toFixed(1)}\r\n                      <Rate value={((bookData?.avgContentRate || 0) + (bookData?.avgVoiceRate || 0)) / 2} disabled />\r\n                    </div>\r\n                  </Col>\r\n                </Row>\r\n\r\n                <div className=\"BookDetail-info-price flex items-center\">\r\n                  <img src={ImageCoin} alt=\"\" />\r\n                  <strong>{bookData?.price}</strong>BCoin\r\n                  {bookData?.prePrice && bookData?.prePrice !== bookData.price && (\r\n                    <del>\r\n                      <strong>{bookData?.prePrice}</strong>Bcoin\r\n                    </del>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"BookDetail-info-title flex items-center\">\r\n                  <img src={ImageBook} alt=\"\" />\r\n                  Về sách & tác giả\r\n                </div>\r\n\r\n                <div className=\"BookDetail-info-content\">{bookData?.description}</div>\r\n                <div className=\"BookDetail-info-btn\">\r\n                  <Row gutter={[12, 12]}>\r\n                    <Col span={12}>\r\n                      {isBoughtBook ? (\r\n                        <Button\r\n                          type=\"primary\"\r\n                          title=\"Đọc sách\"\r\n                          link={Paths.BookReader(bookData?.slug, bookData?._id)}\r\n                        />\r\n                      ) : (\r\n                        <Button type=\"default\" title=\"Thanh toán\" onClick={(): void => handleOpenBuyBookModal(true)} />\r\n                      )}\r\n                    </Col>\r\n                    <Col span={12}>\r\n                      <Button\r\n                        iconName={isSavedBook ? EIconName.Unsaved : EIconName.Saved}\r\n                        iconColor={isSavedBook ? EIconColor.BLACK : EIconColor.WHITE}\r\n                        type={isSavedBook ? 'default' : 'primary'}\r\n                        title={isSavedBook ? 'Bỏ lưu tâm sách' : 'Lưu tâm sách'}\r\n                        onClick={handleSavedBook}\r\n                        loading={savedProductLoading}\r\n                      />\r\n                    </Col>\r\n                  </Row>\r\n                </div>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"BookDetail-wrapper-content\">\r\n        <div className=\"container\">\r\n          <Row>\r\n            {isShowChapter && (\r\n              <Col span={24}>\r\n                <div className=\"BookDetail-card\">\r\n                  <div className=\"BookDetail-card-header flex items-center\">\r\n                    <img src={IconList} alt=\"\" />\r\n                    Danh sách chương\r\n                  </div>\r\n\r\n                  <div className=\"BookDetail-card-body\">\r\n                    <div className=\"BookDetail-chapter\">\r\n                      {bookData?.voice?.map((item, index) => (\r\n                        <ChapterCard\r\n                          key={item._id}\r\n                          {...item}\r\n                          {...item}\r\n                          isActive={index === 0 || isBoughtBook}\r\n                          isAudioPlay={isAudioPlay && item._id === voice?._id}\r\n                          isAudioLoading={isAudioLoading && item._id === voice?._id}\r\n                          isPlayed={audioState.visible && item._id === voice?._id}\r\n                          onClick={(): void => handleClickChapter?.(item)}\r\n                          onBuyBook={(): void => handleOpenBuyBookModal()}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Col>\r\n            )}\r\n\r\n            <Col span={24}>\r\n              <div className=\"BookDetail-card\">\r\n                <div className=\"BookDetail-card-header flex items-center\">\r\n                  <img src={IconList} alt=\"\" />\r\n                  Đánh giá & nhận xét\r\n                </div>\r\n\r\n                <div className=\"BookDetail-card-body\">\r\n                  <BookRate />\r\n                </div>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      </div>\r\n\r\n      <ModalBuyBook\r\n        visible={visibleModalBuyBook}\r\n        onClose={handleCloseBuyBookModal}\r\n        onSubmit={handleSubmitBuyBookModal}\r\n      />\r\n\r\n      <ModalConfirmBuyBook\r\n        {...modalConfirmBuyBook}\r\n        onClose={handleCloseModalConfirmBuyBook}\r\n        onSubmit={(): void => {\r\n          getProduct();\r\n          handleCloseBuyBookModal();\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookDetail;\r\n","import BookDetail from './BookDetail';\r\n\r\nexport default BookDetail;\r\n","import React from 'react';\r\nimport { Pagination as AntdPagination } from 'antd';\r\nimport classNames from 'classnames';\r\n\r\nimport { TPaginationProps } from '@/components/Pagination/Pagination.types';\r\n\r\nimport './Pagination.scss';\r\nimport Icon, { EIconName } from '@/components/Icon';\r\nimport { getTotalPage } from '@/utils/functions';\r\n\r\nconst Pagination: React.FC<TPaginationProps> = ({ page, pageSize, total = 0, className, onChange }) => {\r\n  const itemRender = (\r\n    _: number,\r\n    type: 'page' | 'prev' | 'next' | 'jump-prev' | 'jump-next',\r\n    element: React.ReactNode,\r\n  ): React.ReactNode => {\r\n    switch (type) {\r\n      case 'prev':\r\n        return <Icon name={EIconName.AngleLeft} />;\r\n      case 'next':\r\n        return <Icon name={EIconName.AngleRight} />;\r\n      default:\r\n        return element;\r\n    }\r\n  };\r\n  return (\r\n    <div className={classNames('Pagination', className)}>\r\n      <AntdPagination\r\n        current={page}\r\n        pageSize={pageSize}\r\n        total={total}\r\n        hideOnSinglePage\r\n        showLessItems\r\n        showTotal={(): string => `Trang ${page} / ${getTotalPage(total, pageSize)}`}\r\n        showQuickJumper={false}\r\n        showSizeChanger={false}\r\n        itemRender={itemRender}\r\n        onChange={onChange}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","import Pagination from './Pagination';\r\n\r\nexport * from './Pagination.types';\r\nexport default Pagination;\r\n"],"sourceRoot":""}